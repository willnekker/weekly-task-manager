# 🚀 Ultimate Weekly Task Manager

A stunning, modern, and self-hosted weekly task management web application. Built with Node.js, React, and SQLite, and designed for simplicity, delight, and security.

This project was bootstrapped by an AI agent from Google Gemini.

![App Screenshot](https://storage.googleapis.com/gemini-generations/task-manager-screenshot.png)
*(Note: This is a placeholder screenshot URL)*

## ✨ Features

-   **👤 Multi-User Support:** Secure, isolated task lists for each user.
-   **🔐 JWT Authentication:** Secure authentication with 7-day token expiry.
-   **🗓️ Weekly View:** Clean Monday-Friday columns for focused planning.
-   **🖐️ Drag & Drop:** Intuitive task reordering between and within days.
-   **✏️ Inline Editing:** Quickly edit tasks with keyboard shortcuts.
-   **🔄 Automatic Rollover:** Incomplete tasks automatically move to the next day.
-   **📊 Task Counters:** See your progress with `X/Y` completed tasks per day.
-   **🛡️ Admin Panel:** Manage user sign-ups and view all registered users.
-   **📱 PWA Ready:** Installable on mobile devices for a native-like experience.
-   **🎨 Modern Design:** Inspired by Stripe & Linear, built with TailwindCSS.
-   **🚀 Dockerized:** Quick and easy deployment with Docker Compose.
-   **🪶 Lightweight:** Uses an embedded SQLite database, no external DB required.

## 🚀 Quick Start - Docker (Recommended)

**Minimal setup:**

```bash
# Generate a secure JWT secret
JWT_SECRET=$(openssl rand -hex 32)

# Run the container
docker run -d -p 8080:80 \
  -e JWT_SECRET="$JWT_SECRET" \
  -e DEFAULT_ADMIN_PASSWORD=MySecurePassword123 \
  -e ADMIN_USERNAME=admin \
  -v weekly-task-manager-data:/app/data \
  --name weekly-task-manager \
  ghcr.io/willnekker/weekly-task-manager:latest
```

**App runs at:** http://localhost:8080

**Login with:** Username: `admin`, Password: `MySecurePassword123`

### Environment Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `JWT_SECRET` | Yes | - | Secure random string for JWT signing (use `openssl rand -hex 32`) |
| `DEFAULT_ADMIN_PASSWORD` | Yes | - | Password for the admin user |
| `ADMIN_USERNAME` | No | `willem` | Username for the admin user |
| `NODE_ENV` | No | `production` | Node environment |

## 🐳 Docker Management

### Docker Commands

```bash
# View logs
docker logs -f weekly-task-manager

# Stop application
docker stop weekly-task-manager

# Remove container
docker rm weekly-task-manager

# Update to latest version
docker pull ghcr.io/willnekker/weekly-task-manager:latest
docker stop weekly-task-manager && docker rm weekly-task-manager
# Then run the docker run command again

# Backup data
docker run --rm -v weekly-task-manager-data:/data -v $(pwd):/backup alpine tar -czf /backup/weekly-task-manager-backup-$(date +%Y%m%d).tar.gz -C / data
```

### Docker Compose Alternative

Create a `docker-compose.yml` file:

```yaml
version: '3.8'

services:
  weekly-task-manager:
    image: ghcr.io/willnekker/weekly-task-manager:latest
    ports:
      - "8080:80"
    volumes:
      - weekly-task-manager-data:/app/data
    environment:
      # Generate with: openssl rand -hex 32
      - JWT_SECRET=abc123def456ghi789jkl012mno345pqr678stu901vwx234yz567890abcdef12
      - DEFAULT_ADMIN_PASSWORD=MySecurePassword123
      - ADMIN_USERNAME=admin
      - NODE_ENV=production
    restart: unless-stopped

volumes:
  weekly-task-manager-data:
```

Then run:
```bash
docker-compose up -d
```

### .env File Example

Create a `.env` file for easier management:

```bash
# Copy from .env.example and customize
cp .env.example .env
```

Example `.env` contents:
```bash
# Generate with: openssl rand -hex 32
JWT_SECRET=your-super-secure-random-jwt-secret-here
DEFAULT_ADMIN_PASSWORD=YourSecureAdminPassword123
ADMIN_USERNAME=admin
NODE_ENV=production
```

Then use with docker-compose:
```yaml
# docker-compose.yml
version: '3.8'

services:
  weekly-task-manager:
    image: ghcr.io/willnekker/weekly-task-manager:latest
    ports:
      - "8080:80"
    volumes:
      - weekly-task-manager-data:/app/data
    env_file:
      - .env
    restart: unless-stopped

volumes:
  weekly-task-manager-data:
```

## Port Configuration

- **Notes App (wills-notes):** http://localhost (port 80)
- **Task Manager:** http://localhost:8080 (port 8080)

## 🔧 Configuration

The application is configured using environment variables in the `.env` file, which is generated by `setup.sh`.

-   `JWT_SECRET`: A securely generated random string for signing tokens.
-   `DEFAULT_ADMIN_PASSWORD`: The password for the `willem` admin account.

## 🛡️ Admin Guide

-   Log in with the admin account (`willem`).
-   Click the **Settings** icon (⚙️) in the header to open the Admin Panel.
-   **Toggle Sign-ups:** You can enable or disable new user registrations. This is useful if you want to keep the instance private for yourself or a small team.
-   **View Users:** See a list of all registered users and their join dates.

## 🗄️ Backup Procedures

The entire application state (users, tasks, settings) is stored in a single SQLite database file.

-   **Database location:** `./data/tasks.db`
-   **To back up:** Simply stop the containers (`docker-compose down`) and copy the `tasks.db` file to a secure location.
-   **To restore:** Stop the containers, replace the existing `tasks.db` file with your backup file, and start the containers again (`docker-compose up -d`).

## ⚙️ Manual Setup (Without `setup.sh`)

If you prefer to set things up manually:

1.  Create a `.env` file in the root directory.
2.  Add the following variables:
    ```
    JWT_SECRET=<your_super_secret_key>
    DEFAULT_ADMIN_PASSWORD=<your_desired_admin_password>
    ```
    You can generate a strong `JWT_SECRET` with: `openssl rand -hex 32`
3.  Build and run the Docker containers:
    ```bash
    docker-compose up --build -d
    ```

## Troubleshooting

-   **Permission Denied for `./setup.sh`:** Run `chmod +x setup.sh` to make the script executable.
-   **Port 80 is already in use:** If another service is using port 80, you can change it in `docker-compose.yml`. For example, change `ports: - "80:80"` to `ports: - "8080:80"` and access the app at `http://localhost:8080`.
-   **Login issues:** Ensure your browser is not blocking cookies or local storage for `localhost`.

## 📄 License

This project is open-source and available under the MIT License.
