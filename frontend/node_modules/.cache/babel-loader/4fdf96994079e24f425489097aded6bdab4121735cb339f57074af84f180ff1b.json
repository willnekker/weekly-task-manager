{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import apiClient from'../api/client';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=()=>{const[settings,setSettings]=useState({allow_signups:true});const[users,setUsers]=useState([]);const[isLoading,setIsLoading]=useState(true);const fetchData=useCallback(async()=>{setIsLoading(true);try{const[settingsRes,usersRes]=await Promise.all([apiClient.get('/admin/settings'),apiClient.get('/admin/users')]);setSettings(settingsRes.data);setUsers(usersRes.data);}catch(error){toast.error(\"Failed to load admin data.\");}finally{setIsLoading(false);}},[]);useEffect(()=>{fetchData();},[fetchData]);const handleToggleSignups=async()=>{const newSetting=!settings.allow_signups;try{await apiClient.put('/admin/settings',{allow_signups:newSetting});setSettings({allow_signups:newSetting});toast.success(`Sign-ups have been ${newSetting?'enabled':'disabled'}.`);}catch(error){toast.error(\"Failed to update settings.\");}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gray-100 border-b border-t border-border-color text-center\",children:\"Loading Admin Panel...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 border-b border-t border-border-color p-4 md:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold mb-4\",children:\"Admin Panel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-card-bg p-4 rounded-lg border border-border-color\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Application Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"allow-signups\",className:\"text-sm text-text-primary\",children:\"Allow New User Sign-ups\"}),/*#__PURE__*/_jsx(\"div\",{onClick:handleToggleSignups,className:`relative inline-flex items-center h-6 rounded-full w-11 cursor-pointer transition-colors ${settings.allow_signups?'bg-primary':'bg-gray-200'}`,children:/*#__PURE__*/_jsx(\"span\",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${settings.allow_signups?'translate-x-6':'translate-x-1'}`})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-card-bg p-4 rounded-lg border border-border-color\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-3\",children:[\"Registered Users (\",users.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-48 overflow-y-auto\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-border-color\",children:users.map(user=>/*#__PURE__*/_jsxs(\"li\",{className:\"py-2 flex justify-between items-center text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-text-primary\",children:user.username}),user.is_admin?/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded-full\",children:\"Admin\"}):'']}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-text-secondary\",children:[\"Joined \",new Date(user.created_at).toLocaleDateString()]})]},user.id))})})]})]})]})});};export default AdminPanel;","map":{"version":3,"names":["React","useState","useEffect","useCallback","apiClient","toast","jsx","_jsx","jsxs","_jsxs","AdminPanel","settings","setSettings","allow_signups","users","setUsers","isLoading","setIsLoading","fetchData","settingsRes","usersRes","Promise","all","get","data","error","handleToggleSignups","newSetting","put","success","className","children","htmlFor","onClick","length","map","user","username","is_admin","Date","created_at","toLocaleDateString","id"],"sources":["/home/willemnekker/Desktop/test/weekly-task-manager/frontend/src/components/AdminPanel.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport apiClient from '../api/client';\nimport toast from 'react-hot-toast';\n\nconst AdminPanel = () => {\n    const [settings, setSettings] = useState({ allow_signups: true });\n    const [users, setUsers] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    const fetchData = useCallback(async () => {\n        setIsLoading(true);\n        try {\n            const [settingsRes, usersRes] = await Promise.all([\n                apiClient.get('/admin/settings'),\n                apiClient.get('/admin/users'),\n            ]);\n            setSettings(settingsRes.data);\n            setUsers(usersRes.data);\n        } catch (error) {\n            toast.error(\"Failed to load admin data.\");\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        fetchData();\n    }, [fetchData]);\n\n    const handleToggleSignups = async () => {\n        const newSetting = !settings.allow_signups;\n        try {\n            await apiClient.put('/admin/settings', { allow_signups: newSetting });\n            setSettings({ allow_signups: newSetting });\n            toast.success(`Sign-ups have been ${newSetting ? 'enabled' : 'disabled'}.`);\n        } catch (error) {\n            toast.error(\"Failed to update settings.\");\n        }\n    };\n\n    if (isLoading) {\n        return <div className=\"p-4 bg-gray-100 border-b border-t border-border-color text-center\">Loading Admin Panel...</div>;\n    }\n\n    return (\n        <div className=\"bg-gray-50 border-b border-t border-border-color p-4 md:p-6\">\n            <div className=\"max-w-4xl mx-auto\">\n                <h2 className=\"text-lg font-bold mb-4\">Admin Panel</h2>\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                    {/* Settings */}\n                    <div className=\"bg-card-bg p-4 rounded-lg border border-border-color\">\n                        <h3 className=\"font-semibold mb-3\">Application Settings</h3>\n                        <div className=\"flex items-center justify-between\">\n                            <label htmlFor=\"allow-signups\" className=\"text-sm text-text-primary\">Allow New User Sign-ups</label>\n                            <div \n                                onClick={handleToggleSignups} \n                                className={`relative inline-flex items-center h-6 rounded-full w-11 cursor-pointer transition-colors ${settings.allow_signups ? 'bg-primary' : 'bg-gray-200'}`}\n                            >\n                                <span className={`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${settings.allow_signups ? 'translate-x-6' : 'translate-x-1'}`}/>\n                            </div>\n                        </div>\n                    </div>\n                    {/* User List */}\n                    <div className=\"bg-card-bg p-4 rounded-lg border border-border-color\">\n                        <h3 className=\"font-semibold mb-3\">Registered Users ({users.length})</h3>\n                        <div className=\"max-h-48 overflow-y-auto\">\n                            <ul className=\"divide-y divide-border-color\">\n                                {users.map(user => (\n                                    <li key={user.id} className=\"py-2 flex justify-between items-center text-sm\">\n                                        <div>\n                                            <span className=\"font-medium text-text-primary\">{user.username}</span>\n                                            {user.is_admin ? <span className=\"ml-2 text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded-full\">Admin</span> : ''}\n                                        </div>\n                                        <span className=\"text-text-secondary\">\n                                            Joined {new Date(user.created_at).toLocaleDateString()}\n                                        </span>\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default AdminPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}